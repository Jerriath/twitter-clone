(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[0],{31:function(e,t,n){},54:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(6),s=n.n(c),a=n(46),r=n.n(a),l=(n(54),n(17)),o=n(18),i=n(8),j=(n(31),n(3)),u=function(e){return Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("span",{className:"homeTitleDiv",children:e.header}),Object(j.jsxs)("span",{className:"searchBar",children:[Object(j.jsx)("input",{onKeyDown:function(e){"Enter"===e.key&&(window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ")},className:"searchInput",placeholder:"Search Tweeter"}),Object(j.jsx)("svg",{className:"searchImg",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(j.jsx)("path",{d:"M15.853 16.56c-1.683 1.517-3.911 2.44-6.353 2.44-5.243 0-9.5-4.257-9.5-9.5s4.257-9.5 9.5-9.5 9.5 4.257 9.5 9.5c0 2.442-.923 4.67-2.44 6.353l7.44 7.44-.707.707-7.44-7.44zm-6.353-15.56c4.691 0 8.5 3.809 8.5 8.5s-3.809 8.5-8.5 8.5-8.5-3.809-8.5-8.5 3.809-8.5 8.5-8.5z"})})]})]})},b=function(){return Object(j.jsx)("div",{className:"footer",children:Object(j.jsxs)("div",{className:"footerCentered",children:[Object(j.jsxs)("span",{className:"footerMsg",children:[Object(j.jsx)("h2",{className:"titleFont",children:"Don't miss what's not happpening!"}),Object(j.jsx)("h3",{className:"defaultFont",children:"People on Tweeter are (definitely) last to know."})]}),Object(j.jsx)(l.b,{className:"footerLink",to:"/signin",children:Object(j.jsx)("button",{className:"loginBtn",children:"Log in"})}),Object(j.jsx)(l.b,{className:"footerLink",to:"/signup",children:Object(j.jsx)("button",{className:"signupBtn",children:"Sign up"})})]})})},d=n(0),O=n.n(d),f=n(1),h=n(12),m=n(22),p=n(49),x=n(38),w=Object(p.a)({apiKey:"AIzaSyDqKe0LP_f_3hLc2FHkW6M4yCB8G7jiZds",authDomain:"twitter-clone-3489b.firebaseapp.com",projectId:"twitter-clone-3489b",storageBucket:"gs://twitter-clone-3489b.appspot.com",messagingSenderId:"131799327976",appId:"1:131799327976:web:1e8302662fbdedb398955d"}),g=Object(h.g)(w),v=Object(x.b)(),N=Object(m.b)(w),I=(Object(m.c)(N),n(26)),k=n.n(I),S=function(e){var t=Object(c.useState)(e.hovered),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(!1),l=Object(i.a)(r,2),o=l[0],u=l[1],b=Object(c.useState)({}),d=Object(i.a)(b,2),p=d[0],x=d[1],w=Object(c.useState)(""),I=Object(i.a)(w,2),k=I[0],S=I[1],C=Object(c.useState)(null),A=Object(i.a)(C,2),y=A[0],E=A[1];Object(c.useEffect)((function(){a(e.hovered)}),[e.hovered]),Object(c.useEffect)((function(){var t=Object(h.d)(g,"users",e.userId),n=Object(m.c)(N,"user-images/"+e.userId);Object(h.e)(t).then((function(e){x(e.data())})),Object(m.a)(n).then((function(e){S(e)}))}),[e.userId]),Object(c.useEffect)((function(){if(p.followers){e.userId===v.currentUser.uid?E(null):E(Object(j.jsx)("button",{onClick:F,className:"formBtn prevFollowBtn",children:"Follow"}));for(var t=0;t<p.followers.length;t++)p.followers[t]===v.currentUser.uid&&E(Object(j.jsx)("button",{onClick:F,className:"formBtn prevFollowBtn following"}))}}),[p]),Object(c.useEffect)((function(){return function(){a(""),u(""),S(""),x("")}}),[]);var F=function(){var t=Object(f.a)(O.a.mark((function t(n){var c,s,a,r,l,o,i,j,u,b,d;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(h.d)(g,"users",e.userId),t.next=3,Object(h.e)(c);case 3:return s=t.sent.data(),a=v.currentUser.uid,r=Object(h.d)(g,"users",a),t.next=8,Object(h.e)(r);case 8:if(l=t.sent.data(),!s.followers.includes(a)){t.next=25;break}return console.log("Unfollowed"),o=s.followers,i=l.follows,console.log(o),console.log(i),j=o.filter((function(e){return e!==a})),u=i.filter((function(t){return t!==e.userId})),console.log(j),console.log(u),t.next=21,Object(h.i)(c,{followers:j});case 21:return t.next=23,Object(h.i)(r,{follows:u});case 23:t.next=38;break;case 25:return console.log("Followed"),b=s.followers,d=l.follows,console.log(b),console.log(d),b.push(a),d.push(e.userId),console.log(b),console.log(d),t.next=36,Object(h.i)(c,{followers:b});case 36:return t.next=38,Object(h.i)(r,{follows:d});case 38:window.location.reload();case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)("div",{onMouseEnter:function(){u(!0)},onMouseLeave:function(){u(!1)},style:o||s?{display:"flex"}:{display:"none"},className:"hoverPopup",children:[Object(j.jsxs)("div",{className:"prevHeader",children:[Object(j.jsx)("img",{width:"50px",height:"50px",className:"tweetUserImg",src:k,alt:"Tweet's User"}),y]}),Object(j.jsxs)("div",{className:"prevUser",children:[Object(j.jsx)("p",{style:{fontSize:"1.5em"},className:"defaultFont tweeterDisplayName",children:p.displayName}),Object(j.jsx)("p",{className:"defaultFont tweeterInfo",children:"@"+p.username})]}),Object(j.jsx)("div",{className:"prevBio",children:Object(j.jsx)("p",{className:"defaultFont",children:p.bio?p.bio.length>50?p.bio.slice(0,50)+"...":p.bio:""})}),Object(j.jsxs)("div",{className:"prevFollows",children:[Object(j.jsx)("span",{style:{marginRight:"1em"},children:Object(j.jsx)("p",{className:"defaultFont",children:(p.follows?p.follows.length:0)+" Following"})}),Object(j.jsx)("span",{children:Object(j.jsx)("p",{className:"defaultFont",children:(p.followers?p.followers.length:0)+" Followers"})})]})]})},C=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),o=Object(i.a)(r,2),u=o[0],b=o[1],d=Object(c.useState)(""),p=Object(i.a)(d,2),x=p[0],w=p[1],I=Object(c.useState)(e.tweetInfo),C=Object(i.a)(I,2),A=C[0],y=C[1],E=Object(c.useState)(e.tweetInfo?e.tweetInfo.tweeterId:""),F=Object(i.a)(E,2),D=F[0],U=F[1],B=Object(c.useState)(""),T=Object(i.a)(B,2),M=T[0],L=T[1],P=Object(c.useState)(!1),R=Object(i.a)(P,2),W=R[0],H=R[1],z=Object(c.useState)(null),Z=Object(i.a)(z,2),J=Z[0],G=Z[1],Q=Object(c.useRef)(null);Object(c.useEffect)((function(){if(A.containsImg&&""!==A.id)if(""!==A.retweetId){var e=Object(m.c)(N,"tweet-images/",A.retweetId);Object(m.a)(e).then((function(e){L(Object(j.jsx)("img",{className:"tweetImg",width:"100%",src:e,alt:"User inputted media"}))}))}else{var t=Object(m.c)(N,"tweet-images/"+A.id);Object(m.a)(t).then((function(e){L(Object(j.jsx)("img",{className:"tweetImg",width:"100%",src:e,alt:"User inputted media"}))}))}}),[A.containsImg,A.id,A.retweetId]),Object(c.useEffect)((function(){if(A.retweeter){var e=Object(h.d)(g,"users",A.retweeter);Object(h.e)(e).then((function(e){G("".concat(e.data().displayName," retweeted"))}));var t=Object(h.d)(g,"tweets",A.retweetId);Object(h.e)(t).then((function(e){y(e.data())}))}}),[]),Object(c.useEffect)((function(){if(""!==A.parentTweet){var e=Object(h.d)(g,"tweets",A.parentTweet);Object(h.e)(e).then((function(e){return e.data().tweeterId})).then((function(e){var t=Object(h.d)(g,"users",e);Object(h.e)(t).then((function(e){G("Reply to ".concat(e.data().displayName))}))}))}}),[]),Object(c.useEffect)((function(){var e=Object(h.d)(g,"users",A.tweeterId);Object(h.e)(e).then((function(e){return e.data()})).then((function(e){b(e.username),w(e.displayName)}))}),[A.tweeterId]),Object(c.useEffect)((function(){var e=Object(m.c)(N,"user-images/"+A.tweeterId);Object(m.a)(e).then((function(e){a(e)}))}),[A.tweeterId]),Object(c.useEffect)((function(){return function(){a(""),b(""),w(""),y(null),L(""),G(null),U(""),H(!1)}}),[]);var V=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,c,s,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!v.currentUser){e.next=33;break}return e.next=4,Object(h.d)(g,"tweets",A.id);case 4:return n=e.sent,e.next=7,Object(h.d)(g,"users",v.currentUser.uid);case 7:return c=e.sent,e.next=10,Object(h.e)(c);case 10:if(!(s=e.sent.data()).likes.includes(A.id)){e.next=20;break}return console.log("Disliked"),console.log("Old Likes: "+A.likes),e.next=16,Object(h.i)(n,{likes:A.likes-1});case 16:a=s.likes.filter((function(e){return e!==A.id})),Object(h.i)(c,{likes:a}),e.next=28;break;case 20:return console.log("Liked"),console.log("Old likes: "+A.likes),e.next=24,Object(h.i)(n,{likes:A.likes+1});case 24:return(r=s.likes).push(A.id),e.next=28,Object(h.i)(c,{likes:r});case 28:return e.t0=y,e.next=31,Object(h.e)(n);case 31:e.t1=e.sent.data(),(0,e.t0)(e.t1);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,c,s,a,r,l,o,i,j,u,b,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,n=Object(h.d)(g,"users",v.currentUser.uid),e.next=5,Object(h.e)(n);case 5:c=e.sent.data(),s=Object(h.d)(g,"tweets",A.id),a=[],r=0;case 9:if(!(r<c.tweets.length)){e.next=18;break}return e.next=12,Object(h.e)(Object(h.d)(g,"tweets",c.tweets[r]));case 12:l=e.sent,console.log(l.data()),a.push(l.data());case 15:r++,e.next=9;break;case 18:if(!(o=a.find((function(e){return e.retweetId===A.id})))){e.next=34;break}return console.log("Found retweet"),e.next=23,Object(h.d)(g,"tweets",o.id);case 23:return i=e.sent,e.next=26,Object(h.c)(i);case 26:return j=[],a.filter((function(e){return e.retweetId!==A.id&&(j.push(e.id),!0)})),e.next=30,Object(h.i)(n,{tweets:j});case 30:return e.next=32,Object(h.i)(s,{retweets:A.retweets-1});case 32:e.next=46;break;case 34:return u=k()(),e.next=37,Object(h.d)(g,"tweets",u);case 37:return b=e.sent,e.next=40,Object(h.h)(b,{comments:[],containsImg:A.containsImg,date:h.a.fromDate(new Date),id:u,likes:0,msg:"",retweetId:A.id,retweeter:v.currentUser.uid,retweets:0,tweeterId:A.tweeterId});case 40:return d=c.tweets,c.tweets.push(u),e.next=44,Object(h.i)(n,{tweets:d});case 44:return e.next=46,Object(h.i)(s,{retweets:A.retweets+1});case 46:window.location.reload(),e.next=52;break;case 49:e.prev=49,e.t0=e.catch(1),console.log(e.t0);case 52:case"end":return e.stop()}}),e,null,[[1,49]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){H(!W)};return Object(j.jsxs)("div",{onClick:function(){Q.current.click()},className:"tweetHolder",children:[Object(j.jsx)(l.b,{ref:Q,to:{pathname:"/tweet/".concat(A.id),state:{userId:D,currentUserId:v.currentUser?v.currentUser.uid:null,tweetInfo:A}}}),Object(j.jsx)("h3",{className:"defaultFont headerMsg",children:J}),Object(j.jsxs)("div",{className:"tweet",children:[Object(j.jsx)("div",{className:"imgHolder",children:Object(j.jsx)("img",{className:"tweetUserImg",alt:"User profile",src:s})}),Object(j.jsxs)("div",{className:"tweetContent",children:[Object(j.jsxs)("div",{onClick:function(e){e.stopPropagation()},className:"tweeterInfoHolder",children:[Object(j.jsx)(S,{userId:A.tweeterId,hovered:W}),Object(j.jsx)(l.b,{to:{pathname:"/".concat(u),state:{userId:D,currentUserId:v.currentUser?v.currentUser.uid:null,option:0}},children:Object(j.jsxs)("div",{onMouseOut:Y,onMouseOver:Y,className:"profileFollowSpan",children:[Object(j.jsx)("h3",{className:"tweeterDisplayName defaultFont",children:x}),Object(j.jsx)("h3",{className:"tweeterInfo defaultFont",children:" @"+u})]})}),Object(j.jsx)("h3",{className:"tweeterInfo defaultFont",children:"\xb7"}),Object(j.jsx)("h3",{className:"tweeterInfo defaultFont",children:new Date(1e3*A.date.seconds).toLocaleDateString("en-US")}),Object(j.jsx)("h3",{className:"tweeterInfo defaultFont dots",children:"\xb7\xb7\xb7"})]}),Object(j.jsx)("div",{className:"tweetMsgHolder",children:Object(j.jsx)("p",{className:"tweetMsg",children:A.msg})}),Object(j.jsx)("div",{className:"tweetImgHolder",children:M}),Object(j.jsxs)("div",{className:"tweetBtnHolder",children:[Object(j.jsxs)("div",{onClick:function(t){t.stopPropagation(),e.onTweetHandler(A.id)},className:"btnDiv commentDiv",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"tweetBtn comment",children:Object(j.jsx)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),Object(j.jsx)("p",{className:"btnFont",children:A.comments.length?A.comments.length:""})]}),Object(j.jsxs)("div",{onClick:q,className:"btnDiv retweetDiv",children:[Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"tweetBtn retweet",children:[Object(j.jsx)("polyline",{points:"17 1 21 5 17 9"}),Object(j.jsx)("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),Object(j.jsx)("polyline",{points:"7 23 3 19 7 15"}),Object(j.jsx)("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),Object(j.jsx)("p",{className:"btnFont",children:A.retweets?A.retweets:""})]}),Object(j.jsxs)("div",{onClick:V,className:"btnDiv likeDiv",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",strokeWidth:"2",className:"tweetBtn like",children:Object(j.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),Object(j.jsx)("p",{className:"btnFont",children:A.likes?A.likes:""})]}),Object(j.jsx)("div",{className:"btnDiv shareDiv",children:Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",strokeWidth:"2",className:"tweetBtn share",children:[Object(j.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),Object(j.jsx)("polyline",{points:"16 6 12 2 8 6"}),Object(j.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})})]})]})]})]})},A=function(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],a=n[1];return Object(c.useEffect)((function(){var e=[];Object(h.f)(Object(h.b)(g,"tweets")).then((function(t){return t.forEach((function(t){e.push(t.data())})),e})).then((function(e){return e.sort((function(e,t){return e.date-t.date?-1:1})),e})).then((function(e){return e.filter((function(e){return""===e.parentTweet}))})).then((function(e){a(e)}))}),[]),Object(j.jsx)("div",{className:"homeFeed",children:s.map((function(t){return Object(j.jsx)(C,{onTweetHandler:e.onTweetHandler,tweetInfo:t},k()())}))})},y=function(e){return Object(j.jsx)("div",{className:"rightPanel",children:Object(j.jsx)("div",{className:"rightSpacing",children:Object(j.jsxs)("div",{className:"rightSignup",children:[Object(j.jsx)("h2",{className:"titleFont",children:"Welcome to Tweeter!"}),Object(j.jsx)("p",{className:"defaultFont",children:"Sign out to see the same exact feed."}),Object(j.jsx)("div",{onClick:function(){e.auth.signOut(),console.log(e.auth.currentUser),window.location.reload()},className:"redButton",children:Object(j.jsx)("h2",{className:"buttonFont",children:"Sign Out"})})]})})})},E=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),o=Object(i.a)(r,2),u=o[0],b=o[1];Object(c.useEffect)((function(){e.userInfo&&b("/"+e.userInfo.username)}),[e.userInfo]),Object(c.useEffect)((function(){a(e.userId)}),[e.userId]);return Object(j.jsxs)("div",{className:"leftPanel",children:[Object(j.jsx)(l.b,{className:"logo",to:"/",children:Object(j.jsx)("img",{className:"logoImg",src:"data:image/png;base64,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",alt:"Page logo"})}),Object(j.jsx)(l.b,{to:"/",children:Object(j.jsxs)("div",{className:e.homeClass,children:[Object(j.jsx)("svg",{className:"optionFont",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"26",height:"26",viewBox:"0 0 26 26",children:Object(j.jsx)("path",{d:"M 20 2.03125 C 19.449219 2.03125 19 2.480469 19 3.03125 L 19 7.8125 L 13.71875 2.53125 C 13.328125 2.140625 12.671875 2.140625 12.28125 2.53125 L 0.5625 14.28125 C 0.171875 14.671875 0.171875 15.296875 0.5625 15.6875 C 0.953125 16.078125 1.578125 16.078125 1.96875 15.6875 L 13 4.65625 L 24.0625 15.71875 C 24.257813 15.914063 24.523438 16.03125 24.78125 16.03125 C 25.039063 16.03125 25.273438 15.914063 25.46875 15.71875 C 25.859375 15.328125 25.859375 14.703125 25.46875 14.3125 L 22 10.84375 L 22 3.03125 C 22 2.480469 21.550781 2.03125 21 2.03125 Z M 13 6.5 L 2 17.5 L 2 23 C 2 24.65625 3.34375 26 5 26 L 21 26 C 22.65625 26 24 24.65625 24 23 L 24 17.5 Z M 11 16 L 15 16 C 15.550781 16 16 16.449219 16 17 L 16 23 C 16 23.550781 15.550781 24 15 24 L 11 24 C 10.449219 24 10 23.550781 10 23 L 10 17 C 10 16.449219 10.449219 16 11 16 Z"})}),Object(j.jsx)("h2",{className:"optionFont",children:"Home"})]})}),Object(j.jsx)(l.b,{to:{pathname:u,state:{userId:s,currentUserId:s,option:0}},children:Object(j.jsxs)("div",{className:e.profileClass,children:[Object(j.jsx)("svg",{className:"svg-icon optionFont",viewBox:"0 0 20 20",children:Object(j.jsx)("path",{strokeWidth:"7",d:"M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z"})}),Object(j.jsx)("h2",{className:"optionFont",children:"Profile"})]})}),Object(j.jsx)("div",{className:"redButton",children:Object(j.jsx)("h2",{onClick:function(){e.onTweetHandler("")},className:"buttonFont",children:"Tweet"})})]})},F=function(){return Object(j.jsx)("div",{className:"rightPanel",children:Object(j.jsx)("div",{className:"rightSpacing",children:Object(j.jsxs)("div",{className:"rightSignup",children:[Object(j.jsx)("h2",{className:"titleFont",children:"New to Tweeter?"}),Object(j.jsx)("p",{className:"defaultFont",children:"Sign up now to get the same timeline as everyone else."}),Object(j.jsx)(l.b,{className:"redButton",to:"/signup",children:Object(j.jsx)("h2",{className:"buttonFont",children:"Sign Up"})})]})})})},D=n(13),U=n(15),B=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(0),l=Object(i.a)(r,2),o=l[0],u=l[1],b=Object(c.useState)(""),d=Object(i.a)(b,2),h=d[0],m=d[1],p=Object(c.useState)({}),x=Object(i.a)(p,2),w=x[0],v=x[1],I=Object(c.useRef)(null),S=Object(c.useState)({}),C=Object(i.a)(S,2),A=C[0],y=C[1],E=Object(c.useState)(e.isComment),F=Object(i.a)(E,2);F[0],F[1];Object(c.useEffect)((function(){""===s?y({opacity:.5,pointerEvents:"none"}):""!==s&&y({opacity:1,pointerEvents:"auto"})}),[s]),Object(c.useEffect)((function(){""===h?y({opacity:.5,pointerEvents:"none"}):""!==h&&y({opacity:1,pointerEvents:"auto"})}),[h]),Object(c.useEffect)((function(){var t=Object(D.d)(g,"users",e.userId);Object(D.e)(t).then((function(e){v(e.data())}))}),[e.userId]);var B=function(){var t=Object(f.a)(O.a.mark((function t(n){var c,a,r,l,o,i,j,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),c=k()(),a=Object(D.d)(g,"tweets",c),""===s||""!==h){t.next=8;break}return t.next=6,Object(D.h)(a,{comments:[],containsImg:!1,date:D.a.fromDate(new Date),id:c,isRetweet:!1,likes:0,msg:s,retweets:0,retweeter:"",retweetId:"",tweeterId:e.userId,parentTweet:e.parentTweet});case 6:t.next=21;break;case 8:if(""!==s||""===h){t.next=16;break}return t.next=11,Object(D.h)(a,{comments:[],containsImg:!0,date:D.a.fromDate(new Date),id:c,isRetweet:!1,likes:0,msg:"",retweeter:"",retweetId:"",retweets:0,tweeterId:e.userId,parentTweet:e.parentTweet});case 11:return r=Object(U.d)(N,"tweet-images/".concat(c)),t.next=14,Object(U.e)(r,h);case 14:t.next=21;break;case 16:return t.next=18,Object(D.h)(a,{comments:[],containsImg:!0,date:D.a.fromDate(new Date),id:c,isRetweet:!1,likes:0,msg:s,retweeter:"",retweetId:"",retweets:0,tweeterId:e.userId,parentTweet:e.parentTweet});case 18:return l=Object(U.d)(N,"tweet-images/".concat(c)),t.next=21,Object(U.e)(l,h);case 21:if(""===e.parentTweet){t.next=28;break}return o=Object(D.d)(g,"tweets",e.parentTweet),t.next=25,Object(D.e)(o).then((function(e){return e.data().comments}));case 25:(i=t.sent).push(c),Object(D.i)(o,{comments:i});case 28:return j=Object(D.d)(g,"users",e.userId),(u=w.tweets).push(c),t.next=33,Object(D.i)(j,{tweets:u});case 33:window.location.reload();case 34:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"greyScreen",children:Object(j.jsxs)("div",{className:"tweetInput",children:[Object(j.jsx)("div",{className:"tweetHeader",children:Object(j.jsx)("button",{className:"closeForm",onClick:e.closeTweet,children:"x"})}),Object(j.jsx)("hr",{className:"line"}),Object(j.jsxs)("form",{className:"tweetForm",children:[Object(j.jsx)("div",{className:"imgHolder tweetProfPic",children:Object(j.jsx)("img",{src:e.profPic,alt:"User's profile pic",className:"tweetUserImg"})}),Object(j.jsxs)("div",{className:"tweetInputRight",children:[Object(j.jsx)("div",{className:"tweetTextHolder",children:Object(j.jsx)("label",{className:"tweetLabel",children:Object(j.jsx)("textarea",{onChange:function(e){e.target.scrollHeight>e.target.offsetHeight+5?u(o+1):e.target.value.length<50?u(0):Math.floor(e.target.value.length/10)<Math.floor(s.length/10)&&!(Math.floor(s.length/10)%5)&&u(o-1),a(e.target.value)},value:s,className:"tweetText",overflow:"none",cols:"50",rows:1+o,placeholder:"What's Happening?",resize:"none"})})}),Object(j.jsx)("hr",{className:"line"}),Object(j.jsxs)("div",{className:"tweetBtnHolder",style:{paddingRight:0},children:[Object(j.jsx)("button",{className:"tweetImgBtn",onClick:function(e){e.preventDefault(),console.log("handle image click"),I.current.click()},children:Object(j.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"rgb(252, 110, 80)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(j.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),Object(j.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),Object(j.jsx)("polyline",{points:"21 15 16 10 5 21"})]})}),Object(j.jsx)("input",{onChange:function(e){var t=e.target.files[0];m(t)},type:"file",ref:I,style:{display:"none"}}),Object(j.jsx)("button",{onClick:B,className:"submitTweet",style:A,children:"Tweet"})]})]})]})]})})},T=n(29),M=function(){var e=Object(c.useState)(Object(j.jsx)(b,{})),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(Object(j.jsx)(F,{})),r=Object(i.a)(a,2),l=r[0],o=r[1],d=Object(c.useState)(null),O=Object(i.a)(d,2),f=O[0],h=O[1],m=Object(c.useState)(null),p=Object(i.a)(m,2),x=p[0],w=p[1],I=Object(c.useState)(null),k=Object(i.a)(I,2),S=k[0],C=k[1],M=Object(c.useState)(""),L=Object(i.a)(M,2),P=L[0],R=L[1],W=Object(c.useState)(Object(j.jsx)("h2",{className:"homeTitle",children:"Home"})),H=Object(i.a)(W,2),z=H[0],Z=H[1],J=Object(c.useState)("leftOption selected"),G=Object(i.a)(J,2),Q=G[0],V=(G[1],Object(c.useState)("leftOption")),q=Object(i.a)(V,2),Y=q[0];q[1];Object(T.c)(v,(function(e){null!==e&&null!==n&&(o(Object(j.jsx)(y,{auth:v})),s(null),C(v.currentUser?v.currentUser.uid:null))})),Object(c.useEffect)((function(){return function(){s(null),o(null),h(null),w(null),C(null),R(""),Z(null)}}),[]),Object(c.useEffect)((function(){if(null!==S){var e=Object(U.d)(N,"user-images/"+S);Object(U.b)(e).then((function(e){R(e)}))}}),[S]),Object(c.useEffect)((function(){if(null!==S){var e=Object(D.d)(g,"users",S);Object(D.e)(e).then((function(e){w(e.data())}))}}),[S]);var K=function(e){S?h(Object(j.jsx)(B,{parentTweet:e,userId:S,profPic:P,closeTweet:X})):alert("Please sign in to tweet.")},X=function(){h(null)};return Object(j.jsxs)("div",{className:"homepage",children:[f,Object(j.jsx)(E,{onTweetHandler:K,userInfo:x,userId:S,homeClass:Q,profileClass:Y}),Object(j.jsx)(u,{header:z}),Object(j.jsxs)("div",{className:"homeContent",children:[Object(j.jsx)(A,{onTweetHandler:K}),l]}),n]})},L=function(){var e,t=Object(o.g)(),n=Object(c.useRef)(null),s=Object(c.useState)(Object(j.jsx)(b,{})),a=Object(i.a)(s,2),r=a[0],d=a[1],h=Object(c.useState)(Object(j.jsx)(F,{})),m=Object(i.a)(h,2),p=m[0],x=m[1],w=Object(c.useState)(null),I=Object(i.a)(w,2),S=I[0],A=I[1],M=Object(c.useState)(Object(j.jsx)("h2",{className:"homeTitle",children:"Home"})),L=Object(i.a)(M,2),P=L[0],R=L[1],W=Object(c.useState)(Object(j.jsx)("button",{className:"formBtn followBtn",children:"Follow"})),H=Object(i.a)(W,2),z=H[0],Z=H[1],J=Object(c.useState)(""),G=Object(i.a)(J,2),Q=G[0],V=G[1],q=Object(c.useState)(""),Y=Object(i.a)(q,2),K=Y[0],X=Y[1],_=Object(c.useState)(null),$=Object(i.a)(_,2),ee=$[0],te=$[1],ne=Object(c.useState)(""),ce=Object(i.a)(ne,2),se=ce[0],ae=ce[1],re=Object(c.useState)(""),le=Object(i.a)(re,2),oe=le[0],ie=le[1],je=Object(c.useState)(""),ue=Object(i.a)(je,2),be=ue[0],de=ue[1],Oe=Object(c.useState)(0),fe=Object(i.a)(Oe,2),he=fe[0],me=fe[1],pe=Object(c.useState)(0),xe=Object(i.a)(pe,2),we=xe[0],ge=xe[1],ve=Object(c.useState)(""),Ne=Object(i.a)(ve,2),Ie=Ne[0],ke=Ne[1],Se=Object(c.useState)(""),Ce=Object(i.a)(Se,2),Ae=Ce[0],ye=Ce[1],Ee=Object(c.useState)(!1),Fe=Object(i.a)(Ee,2),De=Fe[0],Ue=Fe[1],Be=Object(c.useState)([]),Te=Object(i.a)(Be,2),Me=Te[0],Le=Te[1],Pe=Object(c.useState)("leftOption"),Re=Object(i.a)(Pe,2),We=Re[0],He=Re[1],ze=Object(c.useState)("leftOption selected"),Ze=Object(i.a)(ze,2),Je=Ze[0],Ge=Ze[1];Object(c.useEffect)((function(){var e,n;V(null===(e=t.state)||void 0===e?void 0:e.userId),X(null===(n=t.state)||void 0===n?void 0:n.currentUserId)}),[t]),Object(c.useEffect)((function(){Q===K&&""!==Q&&""!==K&&Ue(!0)}),[Q,K]),Object(T.c)(v,(function(e){null!==e&&null!==r&&(x(Object(j.jsx)(y,{auth:v})),d(null))})),Object(c.useEffect)((function(){if(Q&&K){var e=Object(D.d)(g,"users",Q);Object(D.e)(e).then((function(e){var t=e.data();t.joinDate="".concat(function(e){switch(e){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"Aug";case 8:return"Sept";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec";default:console.log("This did not work")}}(t.joinDate.toDate().getMonth())," ").concat(t.joinDate.toDate().getFullYear()),ie(t),me(t.follows),ge(t.followers),R(Object(j.jsx)("h2",{className:"homeTitle",children:t.displayName}))}));var t=Object(D.d)(g,"users",K);Object(D.e)(t).then((function(e){de(e.data())}));var n=Object(U.d)(N,"user-images/"+Q),c=Object(U.d)(N,"user-images/"+K),s=Object(U.d)(N,"user-headers/"+Q);Object(U.b)(n).then((function(e){ke(e)})),Object(U.b)(c).then((function(e){ae(e)}));try{Object(U.b)(s).then((function(e){ye(e)}))}catch(a){console.log(a),ye(null)}}}),[Q,K]);var Qe=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,c,s,a,r,l,o,i,j,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(D.d)(g,"users",Q),e.next=3,Object(D.e)(n);case 3:return c=e.sent.data(),s=Object(D.d)(g,"users",K),e.next=7,Object(D.e)(s);case 7:if(a=e.sent.data(),!c.followers.includes(K)){e.next=24;break}return console.log("Unfollowed"),r=c.followers,l=a.follows,console.log(r),console.log(l),o=r.filter((function(e){return e!==K})),i=l.filter((function(e){return e!==Q})),console.log(o),console.log(i),e.next=20,Object(D.i)(n,{followers:o});case 20:return e.next=22,Object(D.i)(s,{follows:i});case 22:e.next=37;break;case 24:return console.log("Followed"),j=c.followers,u=a.follows,console.log(j),console.log(u),j.push(K),u.push(Q),console.log(j),console.log(u),e.next=35,Object(D.i)(n,{followers:j});case 35:return e.next=37,Object(D.i)(s,{follows:u});case 37:window.location.reload();case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Z(Q===K?null:Object(j.jsx)("button",{onClick:Qe,className:"formBtn followBtn",children:"Follow"}));for(var e=0;e<we.length;e++)we[e]===K&&Z(Object(j.jsx)("button",{onClick:Qe,className:"formBtn followBtn following"}))}),[we]),Object(c.useEffect)((function(){oe&&function(){for(var e=oe.tweets,n=new Array(0),c=function(c){var s=Object(D.d)(g,"tweets",e[c]);Object(D.e)(s).then((function(s){var a,r=s.data();(n.push(r),c===e.length-1)&&(n.sort((function(e,t){return e.date-t.date?-1:1})),Le(n),te(null===(a=t.state)||void 0===a?void 0:a.option))}))},s=0;s<e.length;s++)c(s)}()}),[oe,null===(e=t.state)||void 0===e?void 0:e.option]),Object(c.useEffect)((function(){if(0!==Me.length)if(0===ee)Le(Me.filter((function(e){return""===e.parentTweet})));else{if(1===ee)return;if(2===ee)Le(function(e){return e.filter((function(e){return e.containsImg}))}(Me));else if(3===ee){var e=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=oe.likes,n=new Array(0),c=O.a.mark((function e(c){var s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(D.d)(g,"tweets",t[c]),e.next=3,Object(D.e)(s).then((function(e){var s=e.data();n.push(s),c===t.length-1&&(n.sort((function(e,t){return e.date-t.date?-1:1})),Le(n))}));case 3:case"end":return e.stop()}}),e)})),s=0;case 4:if(!(s<t.length)){e.next=9;break}return e.delegateYield(c(s),"t0",6);case 6:s++,e.next=4;break;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}}),[ee]),Object(c.useEffect)((function(){return function(){d(null),x(null),A(null),V(""),R(null),He(""),Ge(""),ie({}),ke(""),Z(null)}}),[]);var Ve=function(){A(null)},qe=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,c,s,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.prev=1,c=Object(U.d)(N,"user-headers/"+Q),e.next=5,Object(U.a)(c);case 5:return s=Object(U.d)(N,"user-headers/"+Q),e.next=8,Object(U.e)(s,n);case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),a=Object(U.d)(N,"user-headers/"+Q),e.next=16,Object(U.e)(a,n);case 16:window.location.reload();case 17:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"homepage",children:[S,Object(j.jsx)(E,{onTweetHandler:function(){K?A(Object(j.jsx)(B,{userId:K,profPic:se,closeTweet:Ve})):alert("Please sign in to tweet.")},userId:K,userInfo:be,homeClass:We,profileClass:Je}),Object(j.jsx)(u,{header:P}),Object(j.jsxs)("div",{className:"homeContent",children:[Object(j.jsxs)("div",{className:"homeFeed",children:[Object(j.jsxs)("div",{className:"profileDiv",children:[Object(j.jsxs)("div",{onClick:De?function(e){console.log("handle image click"),n.current.click()}:null,className:Ae?"headerDiv":"emptyHeaderDiv",children:[Ae?Object(j.jsx)("img",{className:"headerImg",src:Ae,alt:"Profile's Header"}):Object(j.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center"},children:Object(j.jsxs)("svg",{className:"emptyHeaderImg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(j.jsx)("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),Object(j.jsx)("circle",{cx:"12",cy:"13",r:"4"})]})}),Object(j.jsx)("input",{onChange:qe,type:"file",ref:n,style:{display:"none"}})]}),Object(j.jsxs)("div",{className:"profileInfoDiv",children:[Object(j.jsx)("img",{className:"profileUserImg",src:Ie,alt:"Profile user"}),Object(j.jsxs)("div",{className:"profileInfo",children:[z,Object(j.jsx)("h3",{children:oe.displayName}),Object(j.jsx)("p",{style:{color:"rgb(125, 125, 125)"},className:"profInfoFont",children:"@".concat(oe.username)}),Object(j.jsx)("p",{className:"profInfoFont",children:oe.bio}),Object(j.jsx)("p",{style:{color:"rgb(125, 125, 125)"},className:"profInfoFont",children:"Joined ".concat(oe.joinDate)})]}),Object(j.jsxs)("div",{className:"profileFollowInfo",children:[Object(j.jsxs)("span",{className:"profileFollowSpan",children:[Object(j.jsx)("p",{style:{marginRight:"0.25em"},children:"".concat(he.length)}),Object(j.jsx)("p",{style:{color:"rgb(125, 125, 125)"},children:"Following"})]}),Object(j.jsxs)("span",{className:"profileFollowSpan",children:[Object(j.jsx)("p",{style:{marginRight:"0.25em"},children:"".concat(we.length)}),Object(j.jsx)("p",{style:{color:"rgb(125, 125, 125)"},children:"Followers"})]})]})]}),Object(j.jsxs)("div",{className:"profileBtnsDiv",children:[Object(j.jsx)(l.b,{className:0===ee?"profileBtn profileBtnSelected":"profileBtn",to:{pathname:"/".concat(oe.username),state:{userId:Q,currentUserId:K,option:0}},children:Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"profileBtnFont",children:"Tweets"})})}),Object(j.jsx)(l.b,{className:1===ee?"profileBtn profileBtnSelected":"profileBtn",to:{pathname:"/".concat(oe.username,"/replies"),state:{userId:Q,currentUserId:K,option:1}},children:Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"profileBtnFont",children:"Tweets & Replies"})})}),Object(j.jsx)(l.b,{className:2===ee?"profileBtn profileBtnSelected":"profileBtn",to:{pathname:"/".concat(oe.username,"/media"),state:{userId:Q,currentUserId:K,option:2}},children:Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"profileBtnFont",children:"Media"})})}),Object(j.jsx)(l.b,{className:3===ee?"profileBtn profileBtnSelected":"profileBtn",to:{pathname:"/".concat(oe.username,"/likes"),state:{userId:Q,currentUserId:K,option:3}},children:Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"profileBtnFont",children:"Likes"})})})]})]}),0!==Me.length?Me.map((function(e){return Object(j.jsx)(C,{tweetInfo:e},k()())})):null]}),p]}),r]})},P=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],u=r[1],b=Object(c.useState)(null),d=Object(i.a)(b,2),h=d[0],m=d[1],p=Object(o.f)();Object(c.useEffect)((function(){return function(){s(""),u(""),m(null)}}),[]);var x=function(){var e=Object(f.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Object(T.d)(v,n,l);case 4:c=e.sent,console.log(c),p.push("/"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),t.preventDefault(),m(Object(j.jsx)("div",{className:"errorMsg",children:Object(j.jsx)("p",{className:"defaultFont errorList",children:"Email or password is incorrect. Please try again."})})),window.setTimeout((function(){m(null)}),4e3);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"signupPage",children:[Object(j.jsx)("h3",{className:"titleFont",children:"Sign-in to your account"}),Object(j.jsxs)("form",{onSubmit:x,className:"signinForm",children:[Object(j.jsx)("label",{className:"btnLabel",children:Object(j.jsx)("input",{onChange:function(e){s(e.target.value)},className:"signinInput",type:"email",placeholder:"Email",value:n})}),Object(j.jsx)("label",{className:"btnLabel",children:Object(j.jsx)("input",{onChange:function(e){u(e.target.value)},className:"signinInput ",type:"password",placeholder:"Password",value:l})}),Object(j.jsxs)("p",{className:"defaultFont",children:["Don't have an account? ",Object(j.jsx)("a",{href:"/signup",children:"Click Here!"})]}),Object(j.jsx)("label",{className:"btnLabel",children:Object(j.jsx)("button",{className:"formBtn",type:"submit",children:"Submit"})}),Object(j.jsxs)("p",{className:"defaultFont",children:["Return home? ",Object(j.jsx)("a",{href:"/",children:"Click here."})]})]}),h]})},R=function(e,t){for(var n=!0,c=0;c<t.length;c++)if("@".concat(e)===t[c].username){n=!1;break}return n},W=function(e,t){return e===t},H=function(e,t,n,c){return!!R(e,t)&&n===c},z=n.p+"static/media/default_prof_pic.ccb6aed0.png",Z=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],u=r[1],b=Object(c.useState)(""),d=Object(i.a)(b,2),p=d[0],w=d[1],I=Object(c.useState)(""),S=Object(i.a)(I,2),C=S[0],A=S[1],y=Object(c.useState)(""),E=Object(i.a)(y,2),F=E[0],D=E[1],U=Object(c.useState)(""),B=Object(i.a)(U,2),T=B[0],M=B[1],L=Object(c.useState)([]),P=Object(i.a)(L,2),Z=P[0],J=P[1],G=Object(c.useState)(!1),Q=Object(i.a)(G,2),V=Q[0],q=Q[1],Y=Object(c.useState)(null),K=Object(i.a)(Y,2),X=K[0],_=K[1],$=Object(o.f)();Object(c.useEffect)((function(){var e=[];Object(h.f)(Object(h.b)(g,"users")).then((function(t){t.forEach((function(t){e.push(t.data())}))})).then((function(){J(e)}))})),Object(c.useEffect)((function(){if(V)return function(){u(""),w(""),A(""),D(""),M("")}}),[V]);var ee=function(){var e=Object(f.a)(O.a.mark((function e(t){var c,a,r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!H(l,Z,F,T)){e.next=22;break}return t.preventDefault(),e.next=5,Object(x.a)(v,C,F);case 5:return c=e.sent,console.log(c.user),e.next=9,Object(h.d)(g,"users",c.user.uid);case 9:return a=e.sent,r=Object(m.c)(N,"user-images/".concat(c.user.uid)),console.log("Setting document in remote database and uploading user image..."),""===n&&s(z),e.next=15,Object(m.d)(r,n);case 15:return e.next=17,Object(h.h)(a,{username:l,bio:"",displayName:p,likes:[],tweets:[],follows:[],followers:[],joinDate:h.a.fromDate(new Date)});case 17:console.log("User set"),q(!0),$.push("/"),e.next=24;break;case 22:throw t.preventDefault(),new Error("Username or password confirmation invalid!");case 24:e.next=34;break;case 26:e.prev=26,e.t0=e.catch(0),o=[],e.t0.toString().includes("auth/email-already-in-use")&&o.push("Email is already in use. Please use another."),R(l,Z)||o.push("Username has already been taken."),W(F,T)||o.push("Confirmation does not match password."),_(Object(j.jsx)("div",{className:"errorMsg",children:Object(j.jsx)("ul",{className:"errorList",children:o.map((function(e){return Object(j.jsx)("li",{className:"defaultFont",children:e},k()())}))})})),window.setTimeout((function(){_(null)}),4e3);case 34:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"signupPage",children:[Object(j.jsx)("h3",{className:"titleFont",children:"Create your account"}),Object(j.jsxs)("form",{onSubmit:ee,className:"signupForm",children:[Object(j.jsx)("label",{className:"imageInput",children:Object(j.jsx)("input",{onChange:function(e){s(e.target.files[0])},type:"file",alt:"profile pic"})}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){u(e.target.value)},className:"formInput",type:"text",placeholder:"@Username",value:l,required:!0})}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){w(e.target.value)},className:"formInput",type:"text",placeholder:"Display Name",value:p,required:!0})}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){A(e.target.value)},className:"formInput",type:"email",placeholder:"Email",value:C,required:!0})}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){D(e.target.value)},className:"formInput",type:"password",placeholder:"Password",value:F,minLength:"8",required:!0})}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){M(e.target.value)},className:"formInput",type:"password",placeholder:"Re-enter Password",value:T,required:!0})}),Object(j.jsxs)("p",{className:"defaultFont",children:["Already have an account? ",Object(j.jsx)("a",{href:"/signin",children:"Click Here!"})]}),Object(j.jsx)("label",{children:Object(j.jsx)("button",{className:"formBtn",type:"submit",children:"Submit"})}),Object(j.jsxs)("p",{className:"defaultFont",children:["Return home? ",Object(j.jsx)("a",{href:"/",children:"Click here."})]})]}),X]})},J=function(e){var t=Object(o.g)(),n=Object(c.useState)(Object(j.jsx)(b,{})),s=Object(i.a)(n,2),a=s[0],r=s[1],l=Object(c.useState)(Object(j.jsx)(F,{})),d=Object(i.a)(l,2),O=d[0],f=d[1],h=Object(c.useState)(null),m=Object(i.a)(h,2),p=m[0],x=m[1],w=Object(c.useState)(Object(j.jsx)("h2",{className:"homeTitle",children:"Tweet"})),I=Object(i.a)(w,2),S=I[0],A=I[1],M=Object(c.useState)(""),L=Object(i.a)(M,2),P=L[0],R=L[1],W=Object(c.useState)(""),H=Object(i.a)(W,2),z=H[0],Z=H[1],J=Object(c.useState)(""),G=Object(i.a)(J,2),Q=G[0],V=G[1],q=Object(c.useState)(""),Y=Object(i.a)(q,2),K=(Y[0],Y[1]),X=Object(c.useState)(""),_=Object(i.a)(X,2),$=(_[0],_[1]),ee=Object(c.useState)(""),te=Object(i.a)(ee,2),ne=te[0],ce=te[1],se=Object(c.useState)([]),ae=Object(i.a)(se,2),re=ae[0],le=ae[1],oe=Object(c.useState)([]),ie=Object(i.a)(oe,2),je=ie[0],ue=ie[1];Object(T.c)(v,(function(e){null!==e&&null!==a&&(f(Object(j.jsx)(y,{auth:v})),r(null),Z(v.currentUser?v.currentUser.uid:null))})),Object(c.useEffect)((function(){var e,n;R(null===(e=t.state)||void 0===e?void 0:e.userId),Z(null===(n=t.state)||void 0===n?void 0:n.currentUserId),ce(t.state.tweetInfo),le(t.state.tweetInfo.comments)}),[t.state.userId,t.state.currentUserId,t.state.tweetInfo]),Object(c.useEffect)((function(){if(P){var e=Object(D.d)(g,"users",P);Object(D.e)(e).then((function(e){K(e.data())}));var t=Object(U.d)(N,"user-images/"+P);if(Object(U.b)(t).then((function(e){$(e)})),z){var n=Object(U.d)(N,"user-images/"+z);Object(U.b)(n).then((function(e){V(e)}))}}}),[P,z]),Object(c.useEffect)((function(){for(var e=[],t=function(t){var n=Object(D.d)(g,"tweets",re[t]);Object(D.e)(n).then((function(n){e.push(n.data()),t===re.length-1&&(ue(e),console.log(e))}))},n=0;n<re.length;n++)t(n)}),[re]),Object(c.useEffect)((function(){var e=je;e.sort((function(e,t){return e.date-t.date?1:-1})),ue(e)}),[je]),Object(c.useEffect)((function(){return function(){r(null),f(null),x(null),R(""),Z(""),A(null),K({}),$(""),ce(null),V(""),le([]),ue([])}}),[]);var be=function(){x(null)};return Object(j.jsxs)("div",{className:"homepage",children:[p,Object(j.jsx)(E,{onTweetHandler:function(){z?x(Object(j.jsx)(B,{userId:z,profPic:Q,closeTweet:be})):alert("Please sign in to tweet.")},onProfileHandler:function(e){R(e)},onHomeHandler:function(){A(Object(j.jsx)("h2",{className:"homeTitle",children:"Home"}))},homeClass:"leftOption",profileClass:"leftOption"}),Object(j.jsx)(u,{header:S}),Object(j.jsxs)("div",{className:"homeContent",children:[Object(j.jsxs)("div",{className:"homeFeed",children:[ne?Object(j.jsx)(C,{tweetInfo:ne},k()()):null,je?je.map((function(e){return Object(j.jsx)(C,{tweetInfo:e},k()())})):null]}),O]}),a]})},G=function(){return Object(j.jsx)(l.a,{children:Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/signin",component:P}),Object(j.jsx)(o.a,{exact:!0,path:"/signup",component:Z}),Object(j.jsx)(o.a,{exact:!0,path:"/",component:M}),Object(j.jsx)(o.a,{path:"/tweet/",component:J}),Object(j.jsx)(o.a,{path:"/",component:L})]})})};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(G,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.854f36be.chunk.js.map